const popupForm=document.querySelector(".visit-form"),searchButton=document.querySelector(".button-search"),arrivalDate=popupForm.querySelector("[name=date_arrival]");let adultNumber=popupForm.querySelector("[name=adult_number]"),kidsNumber=popupForm.querySelector("[name=kids_number]"),isStorageSupport=!0,adultStorage="",kidsStorage="";try{adultStorage=localStorage.getItem("adultNumber"),kidsStorage=localStorage.getItem("kidsNumber")}catch(e){isStorageSupport=!1}searchButton.addEventListener("click",function(){popupForm.classList.add("visit-form-open"),arrivalDate.focus(),(adultStorage||kidsStorage)&&(adultNumber.value=adultStorage,kidsNumber.value=kidsStorage)}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupForm.classList.contains("visit-form-open")&&(e.preventDefault(),popupForm.classList.remove("visit-form-open"))}),popupForm.addEventListener("submit",function(e){e.preventDefault(),console.log("Отправляем форму"),adultNumber.value&&kidsNumber.value?isStorageSupport&&(localStorage.setItem("adultNumber",adultNumber.value),localStorage.setItem("kidsNumber",kidsNumber.value)):(console.log("Нужно ввести количесво взрослых и детей"),popupForm.classList.add("modal-error"))});
